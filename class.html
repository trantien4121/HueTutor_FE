<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="fonts/icomoon/style.css">

    <link rel="stylesheet" href="css/owl.carousel.min.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Boostrap icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <!-- fontawaresome cdn-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">

    <!-- Style -->

    <link rel="stylesheet" href="css/style.css">

    <link rel="stylesheet" href="css/searchbar.css">

    <link rel="stylesheet" href="css/class.css">

    <!--Lấy plugin của fanpage-->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous"
        src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v16.0&appId=2014861808848576&autoLogAppEvents=1"
        nonce="CHBrokX5"></script>

    <title>Hue Tutors</title>
</head>

<body>

    <!--Mobile menu responsive-->
    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close mt-3">
                <span class="icon-close2 js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div>

    <!--Top Bar-->
    <div class="top-bar">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <a href="#" class=""><span class="mr-1  icon-envelope-open-o"
                            style="color: rgb(218, 125, 125); font-size: 16px;"></span> <span
                            class="d-none d-md-inline-block">Huetutors@gmail.com</span></a>
                    <span class="mx-md-2 d-inline-block"></span>
                    <a href="#" class=""><span class="mr-1  icon-phone"
                            style="color: rgb(24, 165, 24); font-size: 16px;"></span>
                        <span class="d-none d-md-inline-block">
                            (+84) 345476075
                        </span></a>


                    <div class="float-right">

                        <a href="#" class=""><span class="mr-1  icon-twitter"
                                style="color: #1DA1F2; font-size: 16px;"></span> <span
                                class="d-none d-md-inline-block">Twitter</span></a>
                        <span class="mx-md-2 d-inline-block"></span>
                        <a href="#" class=""><span class="mr-1  icon-facebook-official"
                                style="color: #3B5998; font-size: 16px;"></span> <span
                                class="d-none d-md-inline-block">Facebook</span></a>

                    </div>

                </div>

            </div>

        </div>
    </div>

    <!--Navbar_header-->
    <header class="site-navbar js-sticky-header site-navbar-target" role="banner">

        <div class="container">
            <div class="row align-items-center position-relative">


                <div class="site-logo">
                    <a href="index.html" class="text-black">
                        <img srcset="../images/Logo.png 11x" alt="" class="logo">
                    </a>
                </div>

                <div class="col-12">
                    <nav class="site-navigation text-right ml-auto " role="navigation">

                        <ul class="site-menu main-menu js-clone-nav ml-auto d-none d-lg-block">
                            <li class="menu-active"><a href="index.html" class="nav-link"><i
                                        class="mr-1 bi bi-house-door"></i>Trang chủ</a></li>
                            <li><a href="tutor.html" class="nav-link"><i class="mr-1 bi bi-mortarboard"></i>Gia
                                    sư</a></li>


                            <li class="has-children">
                                <a href="#about-section" class="nav-link">Thông tin</a>
                                <ul class="dropdown arrow-top">
                                    <li><a href="#info-section" class="nav-link">Quy trình dạy và học</a></li>
                                    <li><a href="#pricing-section" class="nav-link">Lớp mới</a></li>
                                    <li><a href="#tui-section" class="nav-link">Học phí tham khảo</a></li>
                                </ul>
                            </li>

                            <li><a href="blog.html" class="nav-link"><i class="mr-1 bi bi-person-vcard"></i>Bài
                                    viết</a></li>
                            <li><a href="register.html" class="nav-link register-block"><i
                                        class="mr-1 bi bi-person-add"></i>Đăng ký</a></li>
                            <li><a href="login.html" class="nav-link login-block"><i class="mr-1 bi bi-person"></i>Đăng
                                    nhập</a></li>
                        </ul>
                    </nav>

                </div>

                <div class="toggle-button d-inline-block d-lg-none"><a href="#"
                        class="site-menu-toggle py-5 js-menu-toggle text-black"><span class="icon-menu h3"></span></a>
                </div>

            </div>
        </div>

    </header>

    <main>
        <div class="class-manager-section pb-5">
            <div class="container">
                <div class="row gutters">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-sm-12">
                        <!-- begin filter sesion -->
                        <div class="home-filter">
                            <span class="home-filter__label hide-on-tablet">Sắp xếp theo</span>
                            <button class="home-filter__btn btn home-filter__btn--active hide-on-tablet">Tất
                                cả</button>
                            <button class="home-filter__btn btn"><i class="mr-2 bi bi-circle-fill"
                                    style="font-size: 8px; color: #16FF00"></i>Đang hoạt động</button>
                            <button class="home-filter__btn btn"><i class="mr-2 bi bi-circle-fill"
                                    style="font-size: 8px; color: #FCE22A"></i>Đang chờ</button>
                            <button class="home-filter__btn btn"><i class="mr-2 bi bi-circle-fill"
                                    style="font-size: 8px; color: #FF1E00"></i>Kết thúc</button>
                            <div class="home-filter__page">
                                <span class="home-filter__page-num">
                                    <span class="home-filter__page-current">1</span>/<span
                                        class="home-filter__page-total">2</span>
                                </span>

                                <div class="home-filter__page-control">
                                    <a href="" class="home-filter__page-btn home-filter-prePage">
                                        <i class="home-filter__page-icon fa-solid fa-angle-left"></i>
                                    </a>
                                    <a href="" class="home-filter__page-btn home-filter-nextPage">
                                        <i class="home-filter__page-icon fa-solid fa-angle-right"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- end filter sesion -->
                    </div>
                    <div class="col-12">
                        <div class="card card-custom mt-3">
                            <div class="card-body card-classes mb-4">

                                <div class="row-classes"> <!--trước khi thêm filter-content là row row-classes-->
                                    <!-- <div class="col-lg-4 col-md-6 col-sm-12 mt-4">
                                        <div class="card card-class-custom">
                                            <div class="card-header align-items-center">
                                                <div class="class-title d-flex justify-content-between">
                                                    <div class="class-name">
                                                        <i class="mr-2 bi bi-circle-fill"
                                                            style="font-size: 8px; color: #16FF00"></i>
                                                        Toán - lớp 11
                                                    </div>
                                                    <div class="class-action">
                                                        <button class="btn btn-action">
                                                            <i class="bi bi-three-dots"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="class-tutor mb-4">
                                                    <i class="mr-1 bi bi-mortarboard"></i>Trần Tiến
                                                </div>
                                            </div>
                                            <div class="tutor-image">
                                                <img src="images/hero_1.jpg" alt="img" width="60" height="60"
                                                    class="rounded-circle">
                                            </div>
                                            <div class="card-body mt-3 mb-3">
                                                <div class="class-time mb-3">
                                                    <span><i class="mr-1 bi bi-clock"></i>Thời gian: 20/11/2022 -
                                                        1/3/2023</span>
                                                </div>
                                                <div class="class-numStudent">
                                                    <span><i class="mr-1 bi bi-person"></i>Số lượng học viên: 20</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="home-product-item__favourite">
                                            <i class="bi bi-wifi-2"></i>
                                            <span>online</span>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <form method="post" id="createNewClass"></form>
    <div class="modal fade" id="createNewClassForm" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fs-5" style="margin-top: 12px;" id="exampleModalLabel">Tạo lớp học</h5>
                    <!-- <button type="button" class="btn" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x"
                            style="font-size: 24px;"></i></button> -->
                    <button type="button" class="btn" data-bs-dismiss="modal" aria-label="Close">
                        <i class="bi bi-x" style="font-size: 24px;"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row gutters">
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="subjectName">Môn học</label>
                                <input type="text" class="form-control" id="subjectName" name="subjectName"
                                    placeholder="Nhập môn học">
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="tuitionFee">Học phí (tháng)</label>
                                <input type="text" class="form-control" id="tuitionFee" name="tuitionFee"
                                    placeholder="Nhập mức học phí">
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="gradeLevel">Lớp</label>
                                <input type="text" class="form-control" id="gradeLevel" name="gradeLevel"
                                    placeholder="Nhập lớp">
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="maxStudent">Số học viên tối đa</label>
                                <input type="number" class="form-control" id="maxStudent" name="maxStudent"
                                    placeholder="Nhập số học viên">
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="lessonTime">Thời lượng (h/buổi)</label>
                                <input type="text" class="form-control" id="lessonTime" name="lessonTime"
                                    placeholder="Nhập thời lượng buổi">
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="isOnline">Hình thức</label><br>
                                <div class="form-check form-check-inline mt-2 mr-3">
                                    <input class="form-check-input" type="radio" name="isOnline" id="onlineClass"
                                        value="true" checked>
                                    <label class="form-check-label" for="onlineClass">online</label>
                                </div>
                                <div class="form-check form-check-inline mt-2">
                                    <input class="form-check-input" type="radio" name="isOnline" id="offlineClass"
                                        value="false">
                                    <label class="form-check-label" for="offlineClass">trực tiếp</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="startDay">Ngày bắt đầu</label>
                                <input type="date" class="form-control" id="startDay" name="startDay"
                                    placeholder="Chọn thời gian bắt đầu">
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="endDay">Ngày kết thúc</label>
                                <input type="date" class="form-control" id="endDay" name="endDay"
                                    placeholder="Chọn thời gian kết thúc">
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="status">Trạng thái</label>
                                <input type="text" class="form-control" id="status" name="status" value="Đang chờ"
                                    readonly>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                                <label for="timeTable">Thời khóa biểu</label>
                                <input type="text" class="form-control" id="timeTable" name="timeTable"
                                    placeholder="Nhập thời khóa biểu">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Trở lại</button>
                    <button type="submit" class="btn btn-createClassSubmit ml-3">Thêm lớp</button>
                </div>
            </div>
        </div>
    </div>
    <form action="post" id="createNewClass"></form>

    <!-- Footer section-->
    <footer>
        <div id="footer-section" class="delivery-process-section pt-5"
            style="background-color: rgb(33, 35, 49); opacity: 0.9;color: white;">
            <div class="container">
                <div class="row position-relative p-1">
                    <div class="col-lg-3 col-md-6 col-sm-12 info-huetutor-footer">
                        <span class="info-huetutor-footer__title">
                            THÔNG TIN LIÊN HỆ
                        </span>
                        <ul>
                            <li><i class="mr-1 bi-geo-alt"></i>77 Nguyễn Huệ, Phú Nhuận, Thành phố Huế, Thừa Thiên Huế
                            </li>
                            <li><span class="mr-1  icon-envelope-open-o"></span> Huetutors@gmail.com</li>
                            <li><span class="mr-2  icon-phone"></span>(+84) 345476075</li>
                            <li><i class="mr-2 bi bi-shield-check"></i>Tiến Trần - HUSC</li>
                        </ul>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-12 info-huetutor-footer">
                        <span class="info-huetutor-footer__title ">
                            GIA SƯ CÁC MÔN
                        </span>
                        <ul>
                            <li><i class="mr-2 bi bi-check-lg"></i>Toán, tiếng việt</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Các môn THCS, THPT</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Các học phần ở Đại học, cao đẳng...</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Các loại chứng chỉ</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Ngoại ngữ</li>
                        </ul>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-12 info-huetutor-footer">
                        <span class="info-huetutor-footer__title ">
                            GIA SƯ CÁC LỚP
                        </span>
                        <ul>
                            <li><i class="mr-2 bi bi-check-lg"></i>Cấp tiểu học</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Cấp THCS, THPT</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Đại học, cao đẳng,...</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Lớp luyện thi chứng chỉ</li>
                            <li><i class="mr-2 bi bi-check-lg"></i>Lớp ngoại ngữ</li>
                        </ul>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-12 info-huetutor-footer">
                        <span class="info-huetutor-footer__title">
                            FANPAGE
                        </span>
                        <div class="fanpage-iframe pt-2 pb-2">
                            <div class="fb-page" data-href="https://www.facebook.com/trungtamgiasuhuegioi"
                                data-tabs="timeline" data-width="300" data-height="200" data-small-header="false"
                                data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true">
                                <blockquote cite="https://www.facebook.com/trungtamgiasuhuegioi"
                                    class="fb-xfbml-parse-ignore"><a
                                        href="https://www.facebook.com/trungtamgiasuhuegioi">Trung Tâm Gia Sư Tại Tp
                                        Huế</a></blockquote>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer-end-section" class="delivery-process-section"
            style="background-color:  rgb(43, 45, 59) ;color: white;">
            <div class="end-footer d-flex justify-content-center pt-3 pb-3" style="font-size: 14px;">
                © Copyright 2019 - 2023, Trung tâm gia sư Huế - HueTutors, All Rights Reserved.
            </div>
        </div>
    </footer>

    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/main.js"></script>
    <script src="js/login.js" type="module"></script>
    <script src="js/paginationClass.js" type="module"></script>

    <!-- Use modal -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
        integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
        crossorigin="anonymous"></script>

    <script>

        //convert day function
        function convertDate(day) {
            const d = new Date(day);
            const postedMonth = d.getMonth();
            const postedDay = d.getDate();
            const postedYear = d.getFullYear();
            return `${postedDay}/${postedMonth + 1}/${postedYear}`;
        };

        //check status function (để test - sẽ sửa sau (Check dựa vào status))
        function checkStatusOfClass(startDay, endDay, numStudent, maxStudent) {
            const d = Date.now();
            const start = new Date(startDay);
            const end = new Date(endDay);

            //đang hoạt động
            if ((d <= end) && (d >= start) && (numStudent <= maxStudent))
                return `<i class="mr-2 bi bi-circle-fill icon-filter icon-filter-green"
                                    style="font-size: 8px; color: #16FF00"></i>`;
            //đang chờ
            if ((d < start))
                return `<i class="mr-2 bi bi-circle-fill icon-filter icon-filter-yellow"
                                    style="font-size: 8px; color: #FCE22A"></i>`;
            //đã kết thúc                        
            if (d > end)
                return `<i class="mr-2 bi bi-circle-fill icon-filter icon-filter-red"
                                    style="font-size: 8px; color: #FF1E00"></i>`;
            else return "";
        }

        //fetch api and render data
        const accessToken = localStorage.getItem('accessToken');
        const userInfo = fetch(`http://localhost:8080/api/v1/auth/getUserByAccessToken/${accessToken}`)
            .then(response => {
                return response.json();
            })
            .then(user => {
                const userId = user.data.userId;
                console.log(userId);
                //Nếu User đó có thông tin tutor thì lấy và hiển thị các lớp của tutor và button tạo lớp mới
                const roleInfo = fetch(`http://localhost:8080/api/v1/Tutors/getRole/${userId}`)
                    .then(response => {
                        return response.json();
                    })
                    .then(info => {

                        /*Hiển thị ra giao diện*/

                        //có info.data.tutorId
                        //-> getClasses of tutor Id

                        const queryString = window.location.search;
                        const urlParams = new URLSearchParams(queryString);
                        var currentPage = urlParams.get('pageNo') == null ? Number(1) : Number(urlParams.get('pageNo'));

                        function pagination(curPage, totalPage) {
                            const prePageEle = document.querySelector('.home-filter-prePage');
                            const nextPageEle = document.querySelector('.home-filter-nextPage');
                            const currentPageEle = document.querySelector('.home-filter__page-current');
                            const totalPageEle = document.querySelector('.home-filter__page-total');

                            currentPageEle.innerText = curPage;
                            totalPageEle.innerText = totalPage;

                            if (curPage < 2) {
                                prePageEle.classList.add("home-filter__page-btn--disable");
                            } else {
                                prePageEle.classList.remove("home-filter__page-btn--disable");
                                prePageEle.href = `?pageNo=${curPage - 1}`;
                            }

                            if (curPage < totalPage) {
                                nextPageEle.href = `?pageNo=${curPage + 1}`;
                                nextPageEle.classList.remove("home-filter__page-btn--disable");
                            } else {
                                nextPageEle.classList.add("home-filter__page-btn--disable");
                            }
                        }

                        // let btnFilterList = document.querySelectorAll('.home-filter__btn');

                        // if (info.data.tutorId != null) {
                        //     callApi(`http://localhost:8080/api/v1/Classes/PaginationAndFilter/getClassesOfTutor/${info.data.tutorId}?pageNo=${currentPage - 1}`);
                        // }

                        // btnFilterList.forEach(btn => btn.addEventListener("click", (e) => {

                        //     // e.preventDefault();

                        //     document.querySelector(".home-filter__btn.home-filter__btn--active").classList.remove("home-filter__btn--active");
                        //     btn.classList.add("home-filter__btn--active");

                        //     //Xóa(remove) các element đã filter trước để nhường chỗ cho các filter mới
                        //     function hidefirstElementFilterCalled() {
                        //         const listFilter = document.querySelectorAll(".filter-content");
                        //         for (var i = 0; i < listFilter.length; i++) {
                        //             // listFilter[i].classList.add("d-none");
                        //             listFilter[i].remove();
                        //             if (i == listFilter.length) {
                        //                 continue;
                        //             }
                        //         }
                        //     }

                        //     function getApiToCall() {
                        //         if (info.data.tutorId != null) {
                        //             const checkEle = document.querySelector('.home-filter__btn--active');
                        //             if (checkEle.innerText == "Tất cả") {
                        //                 callApi(`http://localhost:8080/api/v1/Classes/PaginationAndFilter/getClassesOfTutor/${info.data.tutorId}?pageNo=${currentPage - 1}`);
                        //                 hidefirstElementFilterCalled();
                        //             }
                        //             if (checkEle.innerText == "Đang hoạt động") {
                        //                 callApi(`http://localhost:8080/api/v1/Classes/PaginationAndFilter/getClassesOfTutor/${info.data.tutorId}?status=active&pageNo=${currentPage - 1}`);
                        //                 hidefirstElementFilterCalled();
                        //             }
                        //             if (checkEle.innerText == "Đang chờ") {
                        //                 callApi(`http://localhost:8080/api/v1/Classes/PaginationAndFilter/getClassesOfTutor/${info.data.tutorId}?status=wait&pageNo=${currentPage - 1}`);
                        //                 hidefirstElementFilterCalled();
                        //             }
                        //             if (checkEle.innerText == "Kết thúc") {
                        //                 callApi(`http://localhost:8080/api/v1/Classes/PaginationAndFilter/getClassesOfTutor/${info.data.tutorId}?status=end&pageNo=${currentPage - 1}`);
                        //                 hidefirstElementFilterCalled();
                        //             }
                        //         }
                        //     };
                        //     getApiToCall();
                        // }));

                        callApi(`http://localhost:8080/api/v1/Classes/PaginationAndFilter/getClassesOfTutor/${info.data.tutorId}?pageNo=${currentPage - 1}`);

                        let btnFilterList = document.querySelectorAll('.home-filter__btn');
                        btnFilterList.forEach(btn => btn.addEventListener("click", (e) => {
                            e.preventDefault();

                            document.querySelector(".home-filter__btn.home-filter__btn--active").classList.remove("home-filter__btn--active");
                            btn.classList.add("home-filter__btn--active");

                            function hideElement(statusClassIcon) {
                                var listFilterEle = [];
                                var listChildFilterEle = document.querySelectorAll('.bi-circle-fill.icon-filter');
                                listChildFilterEle.forEach(child => {
                                    if (child.classList.contains(statusClassIcon))
                                        listFilterEle.push(child.parentElement.parentElement.parentElement.parentElement.parentElement);
                                });

                                for (var i = 0; i < listFilterEle.length; i++) {
                                    listFilterEle[i].classList.add("d-none");
                                }
                            }

                            function showElement(statusClassIcon) {
                                var listFilterEle = [];
                                var listChildFilterEle = document.querySelectorAll('.bi-circle-fill.icon-filter');
                                listChildFilterEle.forEach(child => {
                                    if (child.classList.contains(statusClassIcon))
                                        listFilterEle.push(child.parentElement.parentElement.parentElement.parentElement.parentElement);
                                });

                                for (var i = 0; i < listFilterEle.length; i++) {
                                    listFilterEle[i].classList.remove("d-none");
                                }
                            }

                            function ShowFilterOnClick() {

                                // callApi(`http://localhost:8080/api/v1/ClassTeaches/PaginationAndFilter/getAllClassesOfUser/${userId}?pageNo=${currentPage - 1}`);

                                const checkEle = document.querySelector('.home-filter__btn--active');
                                if (checkEle.innerText == "Tất cả") {

                                    //hidefirstElementFilterCalled();
                                    //không làm gì cả

                                    showElement("icon-filer-green");
                                    showElement("icon-filter-yellow");
                                    showElement("icon-filter-red");

                                }
                                if (checkEle.innerText == "Đang hoạt động") {

                                    //hidefirstElementFilterCalled();
                                    //ẩn những element có trạng thái không phải là đang hoạt động

                                    showElement("icon-filter-green");
                                    hideElement("icon-filter-red");
                                    hideElement("icon-filter-yellow");
                                    
                                }
                                if (checkEle.innerText == "Đang chờ") {

                                    //hidefirstElementFilterCalled();
                                    //ẩn những element có trạng thái không phải là đang chờ

                                    showElement("icon-filter-yellow");
                                    hideElement("icon-filter-green");
                                    hidedElement("icon-filter-red");
                                }
                                if (checkEle.innerText == "Kết thúc") {

                                    //hidefirstElementFilterCalled();
                                    //ẩn những element có trạng thái không phải và kết thúc

                                    showElement("icon-filter-red");
                                    hideElement("icon-filter-green");
                                    hideElement("icon-filter-yellow");

                                }
                            };

                            ShowFilterOnClick();
                        }));
                        

                        function callApi(api) {
                            const classOfTutor = fetch(api)
                                .then(response => {
                                    return response.json();
                                })
                                .then(classInfo => {

                                    const mainContent = document.querySelector(".row-classes");

                                    const renderContent = document.createElement("div");
                                    renderContent.setAttribute("class", "filter-content row");

                                    //Không tìm thấy lớp học nào của gia sư đó
                                    if (classInfo.status == "NumOfPages = 0") {
                                        const noClassEle = document.createElement("div");
                                        noClassEle.setAttribute("Class", "col-6 offset-3 pt-5 mt-5 pb-4 mb-4");
                                        noClassEle.innerHTML = `
                                        <div class="no-content d-flex justify-content-center">
                                            <h4 style="color: #ccc">Không tồn tại lớp dạy nào!</h4>
                                        </div>
                                    `;
                                        renderContent.appendChild(noClassEle);
                                        mainContent.appendChild(renderContent);
                                    }
                                    else {
                                        //Lấy số trang mà Api trả về
                                        console.log(classInfo.status);
                                        var totalPageStr = classInfo.status;
                                        const totalPage = Number(totalPageStr.slice(13, 14))

                                        //Xử lý các button phân trang
                                        pagination(currentPage, totalPage);

                                        //Hiển thị các lớp

                                        for (var i = 0; i < classInfo.data.length; i++) {
                                            const colReneder = document.createElement("div");
                                            colReneder.setAttribute("class", "col-lg-4 col-md-6 col-sm-12 mt-4");

                                            const cardClass = document.createElement("div");
                                            cardClass.setAttribute("class", "card card-class-custom");

                                            cardClass.innerHTML = `
                                    
                                    <div class="card-header align-items-center">
                                                <div class="class-title d-flex justify-content-between">
                                                    <div class="class-name">
                                                        ${checkStatusOfClass(classInfo.data[i].startDay, classInfo.data[i].endDay, 1, classInfo.data[i].maxStudent)}
                                                        ${classInfo.data[i].subjectName} - ${classInfo.data[i].gradeLevel}
                                                    </div>
                                                    <div class="class-action">
                                                        <button class="btn btn-action" data-bs-toggle="dropdown" aria-expanded="false">
                                                            <i class="bi bi-three-dots"></i>
                                                        </button>
                                                        <ul class="dropdown-menu">
                                                            <li><a class="dropdown-item" href="#">Chỉnh sửa</a></li>
                                                            <li><a class="dropdown-item" href="#">Xóa</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="class-tutor mb-4">
                                                    <i class="mr-1 bi bi-mortarboard"></i> ${classInfo.data[i].tutor.user.fullName}
                                                </div>
                                            </div>
                                           
                                            <div class="card-body mt-3 mb-3">
                                                <div class="class-time mb-3">
                                                    <span><i class="mr-1 bi bi-clock"></i>Thời gian: ${convertDate(classInfo.data[i].startDay)} -
                                                        ${convertDate(classInfo.data[i].endDay)}</span>
                                                </div>
                                                <div class="class-numStudent">
                                                    <span><i class="mr-1 bi bi-person"></i>Số lượng học viên: 1/${classInfo.data[i].maxStudent}</span>
                                                </div>
                                            </div>
                                    `;
                                            colReneder.appendChild(cardClass);

                                            const tag = document.createElement("div");
                                            tag.setAttribute("class", "home-product-item__favourite");


                                            tag.innerHTML = classInfo.data[i].online ? `
                                            <i class="bi bi-wifi-2"></i>
                                            <span>online</span>
                                        `:
                                                `<i class="bi bi-reception-4"></i>
                                            <span>trực tiếp</span>
                                        `;
                                            colReneder.appendChild(tag);
                                            renderContent.appendChild(colReneder);
                                            mainContent.appendChild(renderContent);
                                        }

                                    }
                                    const addNewEle = document.createElement("div");
                                    addNewEle.setAttribute("class", "col-12 d-flex justify-content-center mt-5");
                                    addNewEle.innerHTML = `
                                    <!-- Button trigger create or join in success-->
                                    <button id="btnCreate" type="button" class="btn"
                                        data-bs-toggle="modal" data-bs-target="#createNewClassForm">
                                        <i class="bi bi-plus"></i>
                                        Thêm lớp
                                    </button>
                                    `;
                                    renderContent.appendChild(addNewEle)
                                    //mainContent.appendChild(renderContent);

                                })
                                .catch(error => console.log(error));
                        }

                        //Create new Class if has Role = Tutor

                        const putUserTutorApi = `http://localhost:8080/api/v1/Tutors/updateUserAndTutor/${userId}/${info.data.tutorId}`;
                        const form = document.getElementById('update-form');
                        form.addEventListener('submit', async event => {
                            event.preventDefault();

                            const formData = new FormData(form);

                            const response = await fetch(putUserTutorApi, {
                                method: 'PUT',
                                body: formData
                            });
                            if (!response.ok) {
                                const message = `An error has accured: ${response.status}`;
                                throw new Error(message);
                                console.log(message);
                                // registerFailedMessage.classList.remove('d-none');
                            }
                            const data = await response.json();
                            console.log(data);
                            //alert('update User successfully');

                            const buttnOpenModal = document.getElementById("update-success");
                            buttnOpenModal.click();

                        });

                    })
                    .catch(error => {
                        console.log(error);
                        //Nếu user đó k phải tutor thì hiển thị thông tin các lớp mà user đó đã đăng ký

                        const queryString = window.location.search;
                        const urlParams = new URLSearchParams(queryString);
                        var currentPage = urlParams.get('pageNo') == null ? Number(1) : Number(urlParams.get('pageNo'));

                        function pagination(curPage, totalPage) {
                            const prePageEle = document.querySelector('.home-filter-prePage');
                            const nextPageEle = document.querySelector('.home-filter-nextPage');
                            const currentPageEle = document.querySelector('.home-filter__page-current');
                            const totalPageEle = document.querySelector('.home-filter__page-total');

                            currentPageEle.innerText = curPage;
                            totalPageEle.innerText = totalPage;

                            if (curPage < 2) {
                                prePageEle.classList.add("home-filter__page-btn--disable");
                            } else {
                                prePageEle.classList.remove("home-filter__page-btn--disable");
                                prePageEle.href = `?pageNo=${curPage - 1}`;
                            }

                            if (curPage < totalPage) {
                                nextPageEle.href = `?pageNo=${curPage + 1}`;
                                nextPageEle.classList.remove("home-filter__page-btn--disable");
                            } else {
                                nextPageEle.classList.add("home-filter__page-btn--disable");
                            }
                        }


                        callApi(`http://localhost:8080/api/v1/ClassTeaches/PaginationAndFilter/getAllClassesOfUser/${userId}?pageNo=${currentPage-1}`)

                        let btnFilterList = document.querySelectorAll('.home-filter__btn');
                        btnFilterList.forEach(btn => btn.addEventListener("click", (e) => {
                            e.preventDefault();

                            document.querySelector(".home-filter__btn.home-filter__btn--active").classList.remove("home-filter__btn--active");
                            btn.classList.add("home-filter__btn--active");

                            function hideElement(statusClassIcon) {
                                var listFilterEle = [];
                                var listChildFilterEle = document.querySelectorAll('.bi-circle-fill.icon-filter');
                                listChildFilterEle.forEach(child => {
                                    if (child.classList.contains(statusClassIcon))
                                        listFilterEle.push(child.parentElement.parentElement.parentElement.parentElement.parentElement);
                                });

                                for (var i = 0; i < listFilterEle.length; i++) {
                                    listFilterEle[i].classList.add("d-none");
                                }
                            }

                            function showElement(statusClassIcon) {
                                var listFilterEle = [];
                                var listChildFilterEle = document.querySelectorAll('.bi-circle-fill.icon-filter');
                                listChildFilterEle.forEach(child => {
                                    if (child.classList.contains(statusClassIcon))
                                        listFilterEle.push(child.parentElement.parentElement.parentElement.parentElement.parentElement);
                                });

                                for (var i = 0; i < listFilterEle.length; i++) {
                                    listFilterEle[i].classList.remove("d-none");
                                }
                            }

                            function ShowFilterOnClick() {

                                // callApi(`http://localhost:8080/api/v1/ClassTeaches/PaginationAndFilter/getAllClassesOfUser/${userId}?pageNo=${currentPage - 1}`);

                                const checkEle = document.querySelector('.home-filter__btn--active');
                                if (checkEle.innerText == "Tất cả") {

                                    //hidefirstElementFilterCalled();
                                    //không làm gì cả

                                    showElement("icon-filer-green");
                                    showElement("icon-filter-yellow");
                                    showElement("icon-filter-red");

                                }
                                if (checkEle.innerText == "Đang hoạt động") {

                                    //hidefirstElementFilterCalled();
                                    //ẩn những element có trạng thái không phải là đang hoạt động

                                    showElement("icon-filter-green");
                                    hideElement("icon-filter-red");
                                    hideElement("icon-filter-yellow");
                                    
                                }
                                if (checkEle.innerText == "Đang chờ") {

                                    //hidefirstElementFilterCalled();
                                    //ẩn những element có trạng thái không phải là đang chờ

                                    showElement("icon-filter-yellow");
                                    hideElement("icon-filter-green");
                                    hidedElement("icon-filter-red");
                                }
                                if (checkEle.innerText == "Kết thúc") {

                                    //hidefirstElementFilterCalled();
                                    //ẩn những element có trạng thái không phải và kết thúc

                                    showElement("icon-filter-red");
                                    hideElement("icon-filter-green");
                                    hideElement("icon-filter-yellow");

                                }
                            };

                            ShowFilterOnClick();
                        }));
                        function callApi(api) {
                            fetch(api)
                                .then(response => {
                                    return response.json();
                                })
                                .then(classInfo => {

                                    const mainContent = document.querySelector(".row-classes");
                                    const renderContent = document.createElement("div");
                                    renderContent.setAttribute("class", "filter-content row");

                                    //Không tìm thấy lớp học nào đã đăng ký của gia sư đó đó
                                    if (classInfo.status == "NumOfPages = 0") {
                                        const noClassEle = document.createElement("div");
                                        noClassEle.setAttribute("Class", "col-6 offset-3 pt-5 mt-5 pb-4 mb-4");
                                        noClassEle.innerHTML = `
                                        <div class="no-content d-flex justify-content-center">
                                            <h4 style="color: #ccc">Không tồn tại lớp học nào của bạn!</h4>
                                        </div>
                                    `;

                                        mainContent.appendChild(noClassEle);
                                    }
                                    else {
                                        //Lấy số trang mà Api trả về
                                        console.log(classInfo.status);
                                        var totalPageStr = classInfo.status;
                                        const totalPage = Number(totalPageStr.slice(13, 14))

                                        //Xử lý các button phân trang
                                        pagination(currentPage, totalPage);
                                        //Hiển thị các lớp


                                        //console.log(classInfo[1].cla.tutor.user.fullName);

                                        for (var i = 0; i < classInfo.data.length; i++) {
                                            const colReneder = document.createElement("div");
                                            colReneder.setAttribute("class", "col-lg-4 col-md-6 col-sm-12 mt-4");

                                            const cardClass = document.createElement("div");
                                            cardClass.setAttribute("class", "card card-class-custom");

                                            cardClass.innerHTML = `

                                    <div class="card-header align-items-center">
                                                <div class="class-title d-flex justify-content-between">
                                                    <div class="class-name">
                                                        ${checkStatusOfClass(classInfo.data[i].cla.startDay, classInfo.data[i].cla.endDay, 1, classInfo.data[i].cla.maxStudent)}
                                                        ${classInfo.data[i].cla.subjectName} - ${classInfo.data[i].cla.gradeLevel}
                                                    </div>
                                                    <div class="class-action">
                                                        <button class="btn btn-action" data-bs-toggle="dropdown" aria-expanded="false">
                                                            <i class="bi bi-three-dots"></i>
                                                        </button>
                                                        <ul class="dropdown-menu">
                                                            <li><a class="dropdown-item" href="#">Rời khỏi</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="class-tutor mb-4">
                                                    <i class="mr-1 bi bi-mortarboard"></i> ${classInfo.data[i].cla.tutor.user.fullName}
                                                </div>
                                            </div>

                                            <img src="http://localhost:8080/api/v1/Users/image/${classInfo.data[i].cla.tutor.user.userId}" alt="img"
                                            width="70" height="70" class="mr-1 rounded-circle tutor-image">

                                            <div class="card-body mt-3 mb-3">
                                                <div class="class-time mb-3">
                                                    <span><i class="mr-1 bi bi-clock"></i>Thời gian: ${convertDate(classInfo.data[i].cla.startDay)} -
                                                        ${convertDate(classInfo.data[i].cla.endDay)}</span>
                                                </div>
                                                <div class="class-numStudent mb-3">
                                                    <span><i class="mr-1 bi bi-person"></i>Số lượng học viên: 1/${classInfo.data[i].cla.maxStudent}</span>
                                                </div>
                                                <div class="class-registeredDay">
                                                    <span><i class="mr-1 bi bi-clock"></i>Ngày đăng ký: ${convertDate(classInfo.data[i].registeredDay)}</span>
                                                </div>
                                            </div>
                                    `;
                                            colReneder.appendChild(cardClass);

                                            const tag = document.createElement("div");
                                            tag.setAttribute("class", "home-product-item__favourite");


                                            tag.innerHTML = classInfo.data[i].cla.online ? `
                                            <i class="bi bi-wifi-2"></i>
                                            <span>online</span>
                                        `:
                                                `<i class="bi bi-reception-4"></i>
                                            <span>trực tiếp</span>
                                        `;
                                            colReneder.appendChild(tag);
                                            // mainContent.appendChild(colReneder);
                                            renderContent.appendChild(colReneder);
                                            mainContent.appendChild(renderContent);
                                        }

                                    }
                                })
                                .catch(error => console.log(error));
                        }

                        // const registeredClassOfUser = fetch(`http://localhost:8080/api/v1/ClassTeaches/${userId}`)
                        //     .then(response => {
                        //         return response.json();
                        //     })
                        //     .then(classInfo => {

                        //         const mainContent = document.querySelector(".row-classes");
                        //         const renderContent = document.createElement("div");
                        //         renderContent.setAttribute("class", "filter-content row");

                        //         //Không tìm thấy lớp học nào đã đăng ký của gia sư đó đó
                        //         if (classInfo == null) {
                        //             const noClassEle = document.createElement("div");
                        //             noClassEle.setAttribute("Class", "col-4 offset-4 pt-5 mt-5 pb-4 mb-4");
                        //             noClassEle.innerHTML = `
                        //                 <div class="no-content d-flex justify-content-center">
                        //                     <h4 style="color: #ccc">Không tồn tại lớp học nào của bạn!</h4>
                        //                 </div>
                        //             `;

                        //             mainContent.appendChild(noClassEle);
                        //         }
                        //         else {
                        //             //Hiển thị các lớp

                        //             //console.log(classInfo[1].cla.tutor.user.fullName);

                        //             for (var i = 0; i < classInfo.length; i++) {
                        //                 const colReneder = document.createElement("div");
                        //                 colReneder.setAttribute("class", "col-lg-4 col-md-6 col-sm-12 mt-4");

                        //                 const cardClass = document.createElement("div");
                        //                 cardClass.setAttribute("class", "card card-class-custom");

                        //                 cardClass.innerHTML = `

                        //             <div class="card-header align-items-center">
                        //                         <div class="class-title d-flex justify-content-between">
                        //                             <div class="class-name">
                        //                                 ${checkStatusOfClass(classInfo[i].cla.startDay, classInfo[i].cla.endDay, 1, classInfo[i].cla.maxStudent)}
                        //                                 ${classInfo[i].cla.subjectName} - ${classInfo[i].cla.gradeLevel}
                        //                             </div>
                        //                             <div class="class-action">
                        //                                 <button class="btn btn-action" data-bs-toggle="dropdown" aria-expanded="false">
                        //                                     <i class="bi bi-three-dots"></i>
                        //                                 </button>
                        //                                 <ul class="dropdown-menu">
                        //                                     <li><a class="dropdown-item" href="#">Rời khỏi</a></li>
                        //                                 </ul>
                        //                             </div>
                        //                         </div>
                        //                         <div class="class-tutor mb-4">
                        //                             <i class="mr-1 bi bi-mortarboard"></i> ${classInfo[i].cla.tutor.user.fullName}
                        //                         </div>
                        //                     </div>

                        //                     <img src="http://localhost:8080/api/v1/Users/image/${classInfo[i].cla.tutor.user.userId}" alt="img"
                        //                     width="70" height="70" class="mr-1 rounded-circle tutor-image">

                        //                     <div class="card-body mt-3 mb-3">
                        //                         <div class="class-time mb-3">
                        //                             <span><i class="mr-1 bi bi-clock"></i>Thời gian: ${convertDate(classInfo[i].cla.startDay)} -
                        //                                 ${convertDate(classInfo[i].cla.endDay)}</span>
                        //                         </div>
                        //                         <div class="class-numStudent mb-3">
                        //                             <span><i class="mr-1 bi bi-person"></i>Số lượng học viên: 1/${classInfo[i].cla.maxStudent}</span>
                        //                         </div>
                        //                         <div class="class-registeredDay">
                        //                             <span><i class="mr-1 bi bi-clock"></i>Ngày đăng ký: ${convertDate(classInfo[i].registeredDay)}</span>
                        //                         </div>
                        //                     </div>
                        //             `;
                        //                 colReneder.appendChild(cardClass);

                        //                 const tag = document.createElement("div");
                        //                 tag.setAttribute("class", "home-product-item__favourite");


                        //                 tag.innerHTML = classInfo[i].cla.online ? `
                        //                     <i class="bi bi-wifi-2"></i>
                        //                     <span>online</span>
                        //                 `:
                        //                     `<i class="bi bi-reception-4"></i>
                        //                     <span>trực tiếp</span>
                        //                 `;
                        //                 colReneder.appendChild(tag);
                        //                 // mainContent.appendChild(colReneder);
                        //                 renderContent.appendChild(colReneder);
                        //                 mainContent.appendChild(renderContent);
                        //             }

                        //         }
                        //     })
                        //     .catch(error => console.log(error));

                    });
            })
            .catch(error => {
                console.log(error);
                return "";
            });
    </script>
</body>

</html>